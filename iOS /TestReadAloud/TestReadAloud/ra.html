<html class="paper"><head>
    <meta name="disabled-adaptations" content="watch">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="initial-scale=1">
    <base href="https://www.jianshu.com/p/d270cd7b517c">
    <title>基于机器学习的网页抽取 - 简书</title>
    <style id="assistant-content">
        #summary-container {
            pointer-events: auto;
            -webkit-user-select: auto;
            background: transparent;
            line-height: 1.6em;
        }
        #summary-header {
            padding-top: 1.8em;
            margin: 0em;
            line-height: 1.6em;
        }
        #tableOfContents-container {
            padding-bottom: 2.1em;
        }

        #tableOfContents-header {
            margin: 0em;
            line-height: 1.6em;
            padding-top: 1.8em
        }
        #tableOfContents-list {
            margin-left: 0em;
            margin-right: 0em;
            margin-top: 0.25em;
            padding-left: 1.8em;
            line-height: 1.6em;
        }

        #summary-collapsedContent {
            transition: max-height 0.2s ease-out;
        }

        #summary-collapsible-text-id-1.vision {
            border-top: 0.1em solid var(--separator-color);
            padding: 1em 1em 0;
        }

        .innerTableOfContents-listItem {
            border-bottom: 0.1em solid var(--separator-color);
            margin-bottom: 0.3em;
            margin-top: 0.3em;
        }

        .innerTableOfContents-listItem:last-child {
            border-bottom: none;
        }

        .collapsible {
            cursor: pointer;
            font-weight: 600;
            padding-left: 1em;
            padding-top: 1em;
            padding-bottom: 1em;
            padding-right: 1em;
            width: 100%;
            outline: none
            overflow: hidden;
            background: transparent;
            background-repeat: no-repeat;
            text-align: left;
            border: none;
            -webkit-tap-highlight-color: transparent;
        }

        .collapsible:nth-of-type(2):not(:first-of-type) {
            border-top: 0.1em solid var(--separator-color);
        }

        .collapsible:after {
            content: url('data:image/svg+xml,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="7.15323" height="12.4569"><g><rect height="12.4569" opacity="0" width="7.15323" x="0" y="0"/><path d="M7.15323 6.22406C7.15165 5.96742 7.06077 5.74734 6.85599 5.54414L1.51768 0.255233C1.35263 0.0829682 1.14362 0 0.897181 0C0.395505 0 0 0.386716 0 0.885228C0 1.12446 0.105292 1.35175 0.272634 1.53034L5.01961 6.22248L0.272634 10.9178C0.106874 11.0964 0 11.3164 0 11.5645C0 12.063 0.395505 12.4497 0.897181 12.4497C1.14204 12.4497 1.35263 12.3667 1.51768 12.1945L6.85599 6.90397C7.06235 6.70077 7.15323 6.47911 7.15323 6.22406Z" fill="%23868686" fill-opacity="0.95"/></g></svg>');
            width: 0.8em;
            height: 0.8em;
            float: right;
            padding-left: 0.8em;
            padding-right: 1em;
        }

        .collapsible.vision:after {
            padding-right: 0;
        }

        .collapsedContent {
            margin: 0;
            padding: 0;
            max-height: 0;
            overflow: auto;
            padding-left: 1em;
            padding-right: 1.25em;
            transition: max-height 0.2s ease-out;
        }

        .collapsedContent.vision {
            padding-left: 0;
            padding-right: 0;
        }

        .expandedContent:after {
            content:url('data:image/svg+xml,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="12.4569" height="7.76214"><g><rect height="7.76214" opacity="0" width="12.4569" x="0" y="0"/><path d="M6.23285 7.76214C6.48949 7.76056 6.72239 7.6681 6.91276 7.4649L12.2017 2.12501C12.3667 1.95995 12.4569 1.75095 12.4569 1.50451C12.4569 1.00283 12.0702 0.607328 11.5717 0.607328C11.3324 0.607328 11.098 0.71262 10.9266 0.879962L5.86564 5.99169L6.5976 5.99169L1.53192 0.879962C1.36054 0.714202 1.14046 0.607328 0.892435 0.607328C0.393923 0.607328 0 1.00283 0 1.50451C0 1.74937 0.0917573 1.95837 0.255233 2.12501L5.55293 7.4649C5.75051 7.66968 5.97058 7.76214 6.23285 7.76214Z" fill="%23868686" fill-opacity="0.95"/></g></svg>');
            width: 0.8em;
            height: 0.8em;
            padding-right: 1.15em;
        }

        .expandedContent.vision:after {
            padding-right: 0;
        }

        #innerAssistantContainer {
            margin-bottom: 1.31em;
            border-radius: 1.31em;
            background: var(--narrow-assistant-background-color);
            width: 100%;
            height: auto;
        }

        #innerAssistantContainer > *:nth-child(1 of .eligible-for-border-corner) {
            border-top-left-radius: 1.31em;
            border-top-right-radius: 1.31em;
            transition: max-height 0.2s ease-out, border-top-left-radius 0.2s step-end, border-top-right-radius 0.2s step-end;
        }
        #innerAssistantContainer > *:nth-last-child(1 of .eligible-for-border-corner) {
            border-bottom-left-radius: 1.31em;
            border-bottom-right-radius: 1.31em;
            transition: max-height 0.2s ease-out, border-bottom-left-radius 0.2s step-end, border-bottom-right-radius 0.2s step-end;
        }

        #onDeviceSummaryButton {
            cursor: pointer;
            font-weight: bold;
            padding-left: 1em;
            padding-right: 1em;
            padding-top: 1em;
            padding-bottom: 1em;
            margin-bottom: 1em;
            width: 100%;
            outline: none
            overflow: hidden;
            background: var(--narrow-assistant-background-color);
            background-repeat: no-repeat;
            text-align: left;
            font-size: 1em;
            border-radius: 1.31em;
            border: none;
            transition: opacity 0.2s ease-in-out;
        }
        .hiddenButton {
            opacity: 0;
            pointer-events: none;
            padding: 0px;
            margin: 0px;
            height: 0px;
            border-radius: 0px;
        }

        #glyph {
            height: 1.85em;
            width: 1.85em;
            float: left;
            margin: -0.25em -0.25em 0px 0px;
        }

        #assistant-container {
            background: var(--assistant-sidebar-color);
            padding-top: 2.13em;
            padding-bottom: 2.13em;
            padding-left: 1em;
            padding-right: 1em;
            transition: right 0.5s cubic-bezier(.17,.67,.99,1);
            width: 350px;
            right: 20vw;
        }

        #sidebarButton {
            margin-top: 2.5em;
            position: fixed;
            right: 19vw;
            transition: right 0.5s cubic-bezier(.17,.67,.99,1);
        }

        #article {
            transition: left 0.5s cubic-bezier(.17,.67,.99,1);
        }

        #summary-inline-attribution {
            margin-right: 0.25em;
            margin-bottom: -0.1em;
        }

        #summary-attribution {
            display: flex;
            align-items: center;
            color: var(--assistant-secondary-color);
        }

        #summary-attribution-name {
            margin-left: 4px;
            font-size: 0.7em;
            font-weight: 500;
        }
    </style>

    <style id="article-content">
        h1, h2, h3, h4, h5, h6 {
            font-weight: bold;
        }
        h1 {
            font-size: 1.5em;
            line-height: 1.4em;
        }
        h2 {
            font-size: 1.43em;
        }
        h3 {
            font-size: 1.25em;
        }
        h4, h5, h6 {
            font-size: 1em;
            margin: 1em 0;
        }

        body.watch h1 {
            font-size: 1.1875rem;
        }
        body.watch h2 {
            font-size: 1.125rem;
        }
        body.watch h3 {
            font-size: 1.0625rem;
        }
        body.watch :matches(h4, h5, h6) {
            font-size: 1rem;
        }

        h1.title {
            font-weight: bold;
            font-size: 1.95552em;
            line-height: 1.2141em;
            margin-top: 0;
            margin-bottom: 0.5em;
        }

        .subhead {
            font-weight: normal;
        }

        .title, .subhead, .metadata {
            text-align: start;
            hyphens: manual;
            display: none;
        }

        :nth-child(1 of .page) :matches(.title, .subhead, .metadata) {
            display: block;
        }

        .subhead {
            color: rgba(27, 27, 27, 0.65);
            font-size: 1.46664em;
            margin-top: -0.35em;
            line-height: 1.27275em;
        }

        .metadata {
            margin-top: -0.75em;
            margin-bottom: 1.45em;
        }
        body.watch .metadata {
            line-height: 1.3em;
        }

        .metadata * {
            font-size: 1em !important;
            font-weight: normal !important;
            font-style: normal !important;
            display: inline !important;
            margin: 0;
        }

        .metadata :matches(.byline, .date) {
            display: inline !important;
        }

        .metadata :matches(ul, ol, li) {
            list-style-type: none;
            -webkit-padding-start: 0;
        }

        .title + .metadata {
            margin-top: -0.75em;
        }

        .subhead + .metadata {
            margin-top: -0.7em;
        }

        .page {
            text-align: start;
            word-wrap: break-word;
        }
        body.watch .page {
            hyphens: auto;
        }

        .page.rtl {
            direction: rtl;
        }

        a {
            text-decoration: none;
        }

        a[href] {
            color: rgb(65, 110, 210);
        }

        #article {
            text-rendering: optimizeLegibility;
        }

        #article * {
            /* Scale down anything larger than our view. Max-width maintains aspect ratios on images. */
            max-width: 100%;
        }

        #article img {
            /* By default, images are centered on their own line. */
            margin: 0.5em auto;
            display: block;
            height: auto;
        }

        #article img.reader-image-tiny {
            display: inline;
            margin: 0;
        }

        #article .leading-image, figure, .auxiliary {
            margin-bottom: 1.15em;
        }

        #article .leading-image img {
            margin: auto;
            display: block;
            clear: both;
        }

        #article .leading-image .credit {
            margin: 0;
        }

        #article .leading-image,
        #article figure {
            font-size: 0.75em;
            line-height: 1.5em;
        }

        body.watch #article .leading-image,
        body.watch #article figure {
            font-size: 0.8125rem;
        }

        #article .leading-image :matches(.caption, .credit),
        #article figcaption {
            margin-top: 0.8em;
            width: 100%;
        }

        body.watch #article .leading-image :matches(.caption, .credit),
        body.watch #article figcaption {
            margin-top: 4px;
        }

        body.watch #article figure img {
            margin-bottom: 0;
        }

        #article figcaption > * {
            margin-top: 0.25em;
            margin-bottom: 0.25em;
        }

        #article :matches(.leading-image, figure) p {
            margin-top: 0.4em;
            margin-bottom: 0.4em;
        }

        #article .leading-image .credit + .caption {
            margin-top: 0.1em;
        }

        #article .auxiliary {
            display: block;
            clear: both;
            font-size: 0.75em;
            line-height: 1.4em;
            text-align: start;
        }

        body.watch #article .auxiliary {
            font-size: 0.9em;
        }

        #article .pullquote {
            font-size: 1.42em;
            line-height: 1.38em;
            font-weight: 300;
            font-style: italic;
        }

        #article .pullquote:not(.float) {
            margin-top: 1em;
            margin-bottom: 1em;
            -webkit-margin-start: 1em;
            max-width: calc(100% - 1em);
        }

        #article .auxiliary > *:not(img) {
            -webkit-margin-start: 0;
        }

        #article .auxiliary.float img, #article .auxiliary > *:first-child:not(img) {
            margin: 0;
        }

        /* If the element immediately after an image is inline, it might bump up against the image. */
        #article .auxiliary img + * {
            display: block;
        }

        #article .auxiliary figcaption {
            font-size: 100%;
        }

        #article .auxiliary * {
            margin-top: 0.5em;
            margin-bottom: 0.5em;
        }

        body:not(.watch) #article .float.left {
            float: left;
            margin-right: 20px;
        }

        body:not(.watch) #article .float.right {
            float: right;
            margin-left: 20px;
        }

        body.watch #article .float {
            width: auto !important;
        }

        #article .clear {
            clear: both;
        }

        #article ul.list-style-type-none,
        #article ol.list-style-type-none,
        #article .list-style-type-none > li {
            list-style-type: none;
            -webkit-padding-start: 0;
        }

        #article .page .list-style-type-none.code-block code {
            white-space: pre-wrap;
        }

        #article .page div.scrollable {
            overflow-x: scroll;
            word-wrap: normal;
        }

        #article .page div.scrollable table {
            max-width: none;
        }

        #article .leading-image, #article figure, #article .auxiliary:not(.pullquote) {
            font-family: -apple-system-font;
        }

        #article .leading-image, #article figure, #article .auxiliary, #article .pullquote {
            color: rgba(0, 0, 0, 0.65);
        }

        figure {
            margin: 0;
        }

        body:not(.watch) figure:not(.float) {
            margin-top: 1.4em;
            margin-bottom: 1.4em;
        }

        hr {
            background: rgba(0, 0, 0, 0.2);
            height: 1px;
            border: 0;
        }

        pre {
            font-family: -apple-system-ui-monospaced, Menlo;
            font-size: 0.87em;
            line-height: 1.45em;
        }

        blockquote, q {
            color: rgba(0, 0, 0, 0.65);
        }

        blockquote:not(.pullquote) {
            margin-left: 2px;
            margin-right: 6px;
            padding-left: 16px;
        }

        blockquote:not(.simple):not(.pullquote) {
            border-left: 3px solid rgba(0, 0, 0, 0.1);
        }

        q.pullquote {
            display: block;
        }

        .pullquote q::before, .pullquote q::after, q.pullquote::before, q.pullquote::after {
            content: "";
        }

        /* Collapse excess whitespace. */
        .page p > p:empty,
        .page div > p:empty,
        .page p > div:empty,
        .page div > div:empty,
        .page p + br,
        .page img + br
        {
            display: none;
        }

        .page table {
            font-size: 0.9em;
            text-align: start;
            word-wrap: break-word;
            border-collapse: collapse;
        }

        .page table td, .page table th {
            padding: 0.25em 0.5em;
            border: 1px solid rgb(216, 216, 216);
        }

        body.watch .page > * {
            margin-left: 0;
            margin-right: 0;
        }

        body.watch .page ol {
            padding: 0 0 0 35px;
        }

        body.watch .page ul {
            padding: 0 0 0 20px;
        }

        body.watch .page li {
            margin: 0.8em 0;
        }

        body.watch .page blockquote {
            padding: 0 0 0 8px;
        }

        .delimiter {
            margin-left: 0.45em;
            margin-right: 0.45em;
            margin-top: 0.07em;
            padding: 0;
        }
        .metadata.singleline .delimiter::after {
            content: "•";
        }
        .metadata:not(.singleline) .delimiter {
            content: "";
            display: block !important;
        }

        .page table th {
            background-color: rgba(0, 0, 0, 0.025);
        }

        .page sup, .page sub {
            line-height: 1;
            font-size: 0.75em;
        }

        .hidden {
            display: none;
        }

        /* Special Font Customizations */
        .system { font-family: -apple-system-font; }
        .watch.system { font: -apple-system-body; }
        .yuantisc {
            letter-spacing: 1px;
        }
        .yuantitc {
            letter-spacing: 1px;
        }

        /* Printing and mailing. */
        #article.exported {
            font-size: 1.2em;
        }

        .exported {
            line-height: 1.5em;
        }

        .exported a[href] {
            text-decoration: underline;
        }

        #article.exported {
            margin: 0;
            padding: 0;
        }

        .exported .float {
            float: none;
            margin-top: 1.4em;
            margin-bottom: 1.4em;
        }

        #article.exported .leading-image,
        #article.exported figcaption {
            font-size: 0.75rem;
            color: rgba(0, 0, 0, 0.8);
        }

        .exported .delimiter::after {
            content: "";
        }
    </style>
    <style id="print">
        @media print {
            body {
                margin: 2mm 9mm;
            }

            .original-url {
                display: none;
            }

            #article .float.left {
                float: left !important;
            }

            #article .float.right {
                float: right !important;
            }

            #article .float {
                margin-top: 0 !important;
                margin-bottom: 0 !important;
            }
        }
    </style>

    <style id="reader-ui">
    @media screen {
        body {
            margin: 0;
            padding: 0;
            -webkit-user-select: none;
            overflow-x: hidden;
            -webkit-text-size-adjust: none;
        }
        body.mac {
            background-color: transparent;
        }

        #article {
            pointer-events: auto;
            -webkit-user-select: auto;
            overflow: visible;
            margin-bottom: 42vh !important;
        }

        #article:focus {
            outline: none;
        }

        .page-number {
            display: block;
        }

        #article :nth-child(1 of .page):nth-last-child(1 of .page) .page-number {
            display: none;
        }
        body.watch #article :nth-child(1 of .page):nth-last-child(1 of .page) {
            padding-top: 0.15em;
        }

        .page-number, #incoming-page-corner {
            font-weight: bold;
            position: absolute;
            -webkit-user-select: none;
            font: 12px "Helvetica Neue";
            color: rgb(168, 168, 168);
            cursor: default;
        }
        body.watch :matches(.page-number, #incoming-page-corner) {
            top: 8px;
            right: 16px;
        }

        .page {
            margin-left: auto;
            margin-right: auto;
            padding-top: 35px;
            padding-bottom: 35px;
            position: relative;
            border-top: 1px solid rgba(0, 0, 0, 0.2);
        }
        body.watch .page {
            padding: 0 4px;
        }

        #article :nth-child(1 of .page) {
            margin-top: 0;
            border-top: none;
            padding-top: 32px;
        }

        .page:last-of-type {
            padding-bottom: 45px;
        }

        .page video {
            height: auto;
            position: relative;
        }

        #incoming-page-placeholder {
            height: 30px;
            margin-bottom: 0;
        }

        #incoming-page-corner {
            position: absolute;
            right: 10px;
            top: 8px;
        }

        #incoming-page-text {
            float: right;
            -webkit-user-select: none;
        }

        #next-page-container {
            position:absolute;
            /* Workaround for <rdar://problem/8662842> iOS Reader: loading multiple pages stops at the 2nd page. */
            left: -1000px;
            /* The iframe needs to be wider than the width threshold value for Reader detection, see <rdar://problem/9599297>. */
            width: 320px;
            height: 0px;
        }

        .page div.scrollable {
            -webkit-overflow-scrolling: touch;
        }
    }

    @media screen and (-webkit-min-device-pixel-ratio:2) {
        .page {
            border-top-width: 0.5px;
        }

        hr {
            height: 0.5px;
        }
    }

    #article .extendsBeyondTextColumn {
        max-width: none;
    }

    .iframe-wrapper {
        background-color: black;
        max-width: none;
        text-align: center;
    }

    iframe {
        border: 0;
    }

    @media screen and (min-width: 0px) {
        /* Includes iPhone 5 in portrait */
        .page { padding-left: 16px; padding-right: 16px; }
        .page-number, #incoming-page-corner {
            top: 8px;
            right: 16px;
        }
        #article :nth-child(1 of .page):nth-last-child(1 of .page) {
            padding-top: 14px;
        }
    }

    @media screen and (min-width: 161px) {
        /* Apple Watch 40mm */
        body.watch .page {
            padding: 0 8.5px;
        }
    }

    @media screen and (min-width: 183px) {
        /* Apple Watch 44mm */
        body.watch .page {
            padding: 0 9.5px;
        }
    }

    @media screen and (min-width: 375px) {
        /* iPhone 6 in portrait */
        .page { padding-left: 18px; padding-right: 18px; }
        .page-number, #incoming-page-corner {
            top: 6px;
            right: 18px;
        }
        #article :nth-child(1 of .page):nth-last-child(1 of .page) {
            padding-top: 16px;
        }
    }

    @media screen and (min-width: 414px) {
        /* iPhone 6 Plus in portrait */
        .page { padding-left: 20px; padding-right: 20px; }
        .page-number, #incoming-page-corner {
            top: 6px;
            right: 20px;
        }
        #article :nth-child(1 of .page):nth-last-child(1 of .page) {
            padding-top: 18px;
        }
    }

    /* iPhone 5 in landscape (568px) */

    @media screen and (min-width: 667px) {
        /* iPhone 6 in landscape */
        .page { padding-left: 40px; padding-right: 40px; }
        .page-number, #incoming-page-corner {
            /* Stop lining this text up with .page's right margin. */
            top: 10px;
            right: 10px;
        }
        #article :nth-child(1 of .page):nth-last-child(1 of .page) {
            padding-top: 26px;
        }
    }

    @media screen and (max-width: 569px) {
        /* iPhone 5 in landscape (568px) and smaller, including all iPhones in portrait */
        h1.title {
            font-size: 1.5558em;
        }
        h1 {
            font-size: 1.4em;
        }
        h2 {
            font-size: 1.2777em;
        }
        h3 {
            font-size: 1.15em;
        }
        .subhead {
            font-size: 1.2222em;
        }
        .metadata {
            font-size: 0.9em;
            line-height: 1.6em;
        }
        .title + .metadata {
            margin-top: -0.65em;
        }
    }

    @media screen and (min-width: 704px) {
        /* iPad in landscape with the sidebar open */
        .page { padding-left: 42px; padding-right: 42px; }
    }

    @media screen and (min-width: 736px) {
        /* iPhone 6 Plus in landscape */
        .page { padding-left: 60px; padding-right: 60px; }
        #article :nth-child(1 of .page):nth-last-child(1 of .page) {
            padding-top: 46px;
        }
    }

    @media only screen and (min-width: 780px) {
        #article {
            max-width: 800px;
            margin: 0 auto;
        }

        /* Readable margins. */
        body.system #article { max-width: 83.2ex; }
        body.athelas #article { max-width: 104ex; }
        body.charter #article { max-width: 86ex; }
        body.georgia #article { max-width: 94ex; }
        body.iowanoldstyle #article { max-width: 90ex; }
        body.palatino #article { max-width: 97ex; }
        body.seravek #article { max-width: 87ex; }
        body.timesnewroman #article { max-width: 97ex; }
        body.uiserif #article { max-width: 93ex; }

        :matches(body.pingfangsc, body.pingfangtc) #article { max-width: 87.6ex; }
        :matches(body.heitisc, body.heititc) #article { max-width: 74.8ex; }
        :matches(body.songtisc, body.songtitc) #article { max-width: 102ex; }
        :matches(body.kaitisc, body.kaititc) #article { max-width: 102ex; }
        :matches(body.yuantisc, body.yuantitc) #article { max-width: 86.2ex; }
        :matches(body.libiansc, body.libiantc) #article { max-width: 95ex; }
        :matches(body.weibeisc, body.weibeitc) #article { max-width: 99ex; }
        :matches(body.yuppysc, body.yuppytc) #article { max-width: 87.6ex; }

        body.hiraginosansw3 #article { max-width: 75.7ex; }
        body.hiraginokakugothicpron #article { max-width: 76.4ex; }
        body.hiraginominchopron #article { max-width: 77.5ex; }
        body.hiraginomarugothicpron #article { max-width: 75.1ex; }

        body.applesdgothicneo #article { max-width: 82ex; }
        body.nanumgothic #article { max-width: 88.6ex; }
        body.nanummyeongjo #article { max-width: 94.1ex; }

        .page {
            /* We don't want the lines seperating pages to extend beyond the primary text column. */
            padding-left: 0px;
            padding-right: 0px;
            margin-left: 70px;
            margin-right: 70px;
        }
    }

    #article {
        -webkit-font-smoothing: subpixel-antialiased;
    }

    /* Reader's paper appearance. */
    html.paper {
        height: 100%;
    }

    html.paper body {
        height: calc(100% - 44px);
    }

    html.paper body:after {
        content: "";
        height: 22px;
        display: block;
    }

    /* Clearfix */
    html.paper .page::after {
        content: "";
        display: table;
        clear: both;
    }

    html.paper #article {
        min-height: 100%;
        margin: 22px auto 0 auto;
    }

    html.paper #article :nth-child(1 of .page), html.paper #article :nth-child(1 of .page):nth-last-child(1 of .page) {
        padding-top: 53px;
    }

    html.paper #article .page-number, html.paper #article #incoming-page-corner {
        /* Stop lining this text up with .page's right margin. */
        top: 14px;
        right: 0px;
    }
    /* End Reader's paper appearance. */

    /* Use slightly smaller page padding when vertically constrained. */
    @media screen and (max-height: 700px) {
        .page {
            padding-top: 32px;
            padding-bottom: 32px;
        }
    }

    </style>

    <style id="theming">
        body.white {
            --body-font-color: rgb(27, 27, 27);
            --assistant-secondary-color: rgba(84, 84, 84, 1.0);
            --horizontal-line-color: rgb(220, 220, 220);
            --assistant-sidebar-color: rgb(220, 220, 220);
            --paper-shadow-color: rgba(0, 0, 0, 0.2);
            --separator-color: rgb(220, 220, 220);
            --assistant-sidebar-color: rgba(245, 245, 245, 0.72);
            --narrow-assistant-background-color: rgba(18, 18, 18, 0.1);
        }
        body.sepia {
            --body-font-color: rgb(79, 50, 28);
            --assistant-secondary-color: rgb(79, 50, 28, 0.5);
            --horizontal-line-color: rgb(230, 218, 201);
            --separator-color: rgb(204, 191, 157);
            --assistant-sidebar-color: rgb(230, 218, 201);
            --paper-shadow-color: rgba(0, 0, 0, 0.2);
            --narrow-assistant-background-color: rgba(18, 18, 18, 0.1);
        }
        body.gray {
            --body-font-color: rgba(255, 255, 255, 0.78);
            --assistant-secondary-color: rgba(172, 172, 172, 1.0);
            --horizontal-line-color: rgb(111, 111, 111);
            --separator-color: rgb(111, 111, 111);
            --assistant-sidebar-color: rgba(44, 44, 44, 0.76);
            --narrow-assistant-background-color: rgba(18, 18, 18, 0.1);
        }
        body.night {
            --body-font-color: rgb(176, 176, 176);
            --assistant-secondary-color: rgba(172, 172, 172, 1.0);
            --horizontal-line-color: rgb(62, 62, 62);
            --separator-color: rgb(62, 62, 62);
            --assistant-sidebar-color: rgba(44, 44, 44, 0.76);
            --narrow-assistant-background-color: rgba(50, 50, 50, 0.3);
        }
        body.night.oled {
            --body-font-color: rgb(210, 210, 210);
            --assistant-secondary-color: rgba(172, 172, 172, 1.0);
            --horizontal-line-color: rgba(210, 210, 210, 0.35);
            --separator-color: rgba(210, 210, 210, 0.35);
            --assistant-sidebar-color: rgba(44, 44, 44, 0.76);
            --narrow-assistant-background-color: rgba(50, 50, 50, 0.3);
        }
        body.watch.night.oled {
            --body-font-color: rgb(174, 180, 191);
        }
        body.vision {
            --separator-color: var(--background-color);
        }

        html:not(.paper) body.white, body.white #article {
            --background-color: white;
            background-color: var(--background-color);
        }
        html:not(.paper) body.sepia, body.sepia #article {
            --background-color: rgb(248, 241, 227);
            background-color: var(--background-color);
        }
        html:not(.paper) body.gray, body.gray #article {
            --background-color: rgb(74, 74, 77);
            background-color: var(--background-color);
        }
        html:not(.paper) body.night, body.night #article {
            --background-color: rgb(18, 18, 18);
            background-color: var(--background-color);
        }
        html:not(.paper) body.night.oled, body.night.oled #article {
            --background-color: black;
            background-color: var(--background-color);
        }

        /* OS X Reader draws backdrop background colors outside of web content, so the follow set only applies to iOS. */
        html.paper body.ios.white {
            background-color: rgb(230, 230, 230);
        }
        html.paper body.ios.sepia {
            background-color: rgb(224, 216, 200);
        }
        html.paper body.ios.gray {
            background-color: rgb(50, 50, 51);
        }
        html.paper body.ios.night {
            background-color: black;
        }

        body.watch.night .metadata * {
            color: rgb(214, 217, 223) !important;
        }

        html.paper body.white #article, html.paper body.sepia #article {
            box-shadow: 0px 6px 12px 3px var(--paper-shadow-color);
        }
        html.paper body.gray #article {
            box-shadow: 0px 6px 12px 3px rgba(0, 0, 0, 0.24);
        }
        html.paper body.night #article {
            outline: 1px solid #272727;
        }

        body.watch.night.oled :matches(h1, h2, h3, h4, h5, h6) {
            color: white;
        }

        body.sepia #article :matches(.leading-image, figure, .auxiliary, .pullquote) {
            color: rgba(79, 50, 28, 0.9);
        }
        body.gray #article :matches(.leading-image, figure, .auxiliary, .pullquote) {
            color: rgba(255, 255, 255, 0.7);
        }
        body.night #article :matches(.leading-image, figure, .auxiliary, .pullquote) {
            color: rgba(255, 255, 255, 0.67);
        }
        body.night.oled #article :matches(.leading-image, figure, .auxiliary, .pullquote) {
            color: rgba(210, 210, 210, 0.9);
        }

        body.sepia #article a[href] {
            color: rgb(209, 150, 0);
        }
        body.gray #article a[href], body.night #article a[href] {
            color: rgb(90, 200, 250);
        }
        body.watch.night.oled #article a[href] {
            color: rgb(32, 148, 250);
        }

        body #article :matches(.page, .metadata a[href]) {
            color: var(--body-font-color);
        }
        body #article .page {
            border-top-color: var(--horizontal-line-color);
        }
        body #article hr {
            background: var(--horizontal-line-color);
        }
        body #assistant-container p {
            color: var(--assistant-secondary-color);
        }
        body #assistant-container ol {
            color: var(--assistant-secondary-color);
        }
        body #assistant-container h2 {
            color: var(--body-font-color);
            font-size: 1.43em;
        }
        body #assistant-container h3 {
            color: var(--body-font-color);
            font-size: 1.25em;
        }
        body #assistant-container h1 {
            font-size: 1.5em;
            line-height: 1.4em;
            color: var(--body-font-color);
            margin: 0em;
        }
        body #assistant-container a {
            color: var(--assistant-secondary-color);
        }
        body #assistant-container ol {
            padding: 0em;
        }
        body #summary-container p {
            color: var(--assistant-secondary-color);
            margin: 0px;
            padding-top: 4px;
        }
        body #summary-container h2 {
            color: var(--body-font-color);
        }
        body #summary-container h1 {
            color: var(--body-font-color);
        }

        body #tableOfContentsInsideArticle-list a {
            color: var(--body-font-color);
            font-size: 1em;
        }

        body #innerAssistantContainer p {
            color: var(--body-font-color);
            margin-top: 0;
            margin-bottom: 0.4em;
        }
        body #innerAssistantContainer ol {
            color: var(--body-font-color);
        }
        body #innerAssistantContainer li  {
            margin-left: 1.4em;
        }
        body #innerAssistantContainer ol li::marker {
            color: var(--assistant-secondary-color);
        }
        body #innerAssistantContainer button {
            color: var(--body-font-color);
            font-size: 1em;
        }

        body #onDeviceSummaryButton {
            color: var(--body-font-color);
        }

        body.sepia .subhead {
            color: rgba(79, 50, 28, 0.72);
        }
        body.gray .subhead {
            color: rgba(255, 255, 255, 0.65);
        }
        body.night .subhead {
            color: rgba(185, 185, 185, 0.9);
        }
        body.night.oled .subhead {
            color: rgba(210, 210, 210, 0.85);
        }

        body.sepia :matches(#article .page-number, #incoming-page-corner) {
            color: rgba(63, 41, 23, 0.5);
        }
        body.gray :matches(#article .page-number, #incoming-page-corner) {
            color: rgba(255, 255, 255, 0.45);
        }
        body.night :matches(#article .page-number, #incoming-page-corner) {
            color: rgba(255, 255, 255, 0.55);
        }
        body.night.oled :matches(#article .page-number, #incoming-page-corner) {
            color: rgba(210, 210, 210, 0.8);
        }

        body.sepia #article blockquote, body.sepia #article q {
            color: rgb(140, 112, 79);
        }
        body.sepia #article blockquote:not(.simple):not(.pullquote) {
            border-left-color: rgba(154, 128, 92, 0.1);
        }
        body.gray #article blockquote, body.gray #article q {
            color: rgba(255, 255, 255, 0.6);
        }
        body.gray #article blockquote:not(.simple):not(.pullquote) {
            border-left-color: rgba(255, 255, 255, 0.15);
        }
        body.night #article blockquote, body.night #article q {
            color: rgba(255, 255, 255, 0.6);
        }
        body.night #article blockquote:not(.simple):not(.pullquote) {
            border-left-color: rgba(255, 255, 255, 0.15);
        }
        body.night.oled #article blockquote, body.night.oled #article q {
            color: rgba(210, 210, 210, 0.85);
        }
        body.night.oled #article blockquote:not(.simple):not(.pullquote) {
            border-left-color: rgba(210, 210, 210, 0.2);
        }
        body.watch.night #article blockquote, body.watch.night #article q {
            color: var(--body-font-color);
        }
        body.watch.night #article blockquote:not(.simple):not(.pullquote) {
            border-left-color: rgb(51, 51, 51);
        }

        body.sepia table :matches(td, th) {
            border-color: rgb(230, 218, 202);
        }
        body.sepia table th {
            background-color: rgba(154, 128, 92, 0.06);
        }
        body.gray table :matches(td, th) {
            border-color: rgb(106, 106, 106);
        }
        body.gray table th {
            background-color: rgba(255, 255, 255, 0.035);
        }
        body.night table :matches(td, th) {
            border-color: rgb(50, 50, 50);
        }
        body.night table th {
            background-color: rgba(255, 255, 255, 0.045);
        }
        body.night.oled table th {
            background-color: rgba(255, 255, 255, 0.075);
        }

        @media (inverted-colors) {
            /* If the user has turned on the "smart invert" accessibility preference, they generally prefer
               their images, such as photos, to not be inverted. Provide this by applying a filter that
               inverts the colors again (effectively un-inverting). */
            body:not(.gray):not(.night) #article :matches(img, video) {
                filter: invert();
            }
            body:not(.gray):not(.night) #article picture {
                filter: none !important;
            }
            body.gray, body.night {
                filter: invert();
            }
            body:matches(.gray, .night) #article :matches(img:not(picture > img), picture, video) {
                filter: none !important;
            }
            body:matches(.gray, .night) #article iframe {
                filter: invert();
            }
            html.paper body.white #article, html.paper body.sepia #article {
                --paper-shadow-color: rgba(255, 255, 255, 0.2);
            }
            /* The background color of <body> is not inverted by the filter. Achieve this by manually
               setting the inverse color. */
            html:not(.paper) body.gray {
                background-color: rgb(165, 165, 163) !important;
            }
            html.paper body.gray {
                background-color: rgb(205, 205, 204) !important;
            }
            html:not(.paper) body.night {
                background-color: rgb(237, 237, 237) !important;
            }
            html:not(.paper) body.night.oled {
                background-color: white !important;
            }
            html.paper body.night {
                background-color: white !important;
            }
        }
    </style>

    <style id="locale-specific-adjustments">
        .locale-ja .page {
            text-align: justify;
        }

        .locale-zh-Hans .page {
            text-align: justify;
        }

        .locale-zh-Hant .page {
            text-align: justify;
            word-break: break-all;
        }

        .locale-hi .title {
            line-height: 1.65em;
        }

        /* See 32728279 and 54061051. */
        .locale-ur.notonastaliqurdu :matches(h1, h2, h3, h4, h5, h6) {
            font-weight: normal;
            line-height: 2.55em;
        }
    </style>

    <style id="dynamic-article-content"></style>

    <!-- For Twitter’s script to find and script world to be created (see 34937240). -->
    <script>
        window.isReaderPage = true;
    </script>
</head>
<body class="mac white locale-zh-Hans pingfangsc system">
    <iframe aria-hidden="true" id="next-page-container"></iframe>
    <div id="article" role="article" style="-webkit-locale: &quot;zh-Hans&quot;; z-index: 2; position: static; left: 247.5px;">
        <!-- This node will contain a number of div.page. -->
    <div class="page"><div class="page-number">页码：1/1</div><h1 class="title" data-reader-unique-id="titleElement">基于机器学习的网页抽取</h1><div class="metadata singleline"><time datetime="2017-07-12T08:41:57.000Z" data-reader-unique-id="307" class="date">2017.07.12 16:41:57</time></div><p data-reader-unique-id="1">由于最近在做一个项目，给了36个安全网站相关的博客网站，需要将其中的博客正文都抽取出来，而且需要满足以后添加一个博客网站的链接，就可以自动完成正文的抽取工作。</p>
<p data-reader-unique-id="2">以前写过的爬虫是正则或CSS选择器(或xpath)的网页抽取都基于属于基于包装器(wrapper)的网页抽取，但是这类抽取算法有一个通病，对于不同结构的网页，要制定不同的抽取规则。如果一个安全态势感知系统需要获取1000个异构网站的博客正文，就需要编写并维护1000套抽取规则，这太恶心了，根本就是不想完成的任务。</p>
<p data-reader-unique-id="3">从2000年左右就开始有人研究如何用机器学习的方法，让程序在不需要人工制定规则的情况下从网页中提取所需的信息。从目前的科研成果看，基于机器学习的网页抽取的重心偏向于新闻网页内容自动抽取，即输入一个新闻网页，程序可以自动输出新闻的标题、正文、时间等信息。新闻、博客、百科类网站包含的结构化数据较为单一，基本都满足{标题，时间，正文}这种结构，抽取目标很明确，机器学习算法也较好设计。</p>
<p data-reader-unique-id="4"><strong data-reader-unique-id="5">题外话</strong>：这种正文提取算法可以帮助提取安全博客网站的正文，但是一些电商、求职等类型的网页中包含的结构化数据非常复杂，有些还有嵌套，并没有统一的抽取目标，针对这类页面设计机器学习抽取算法难度较大。</p>
<p data-reader-unique-id="6">下面主要描述如何设计机器学习算法抽取新闻、博客、百科等网站中的正文信息，后面简称为<strong data-reader-unique-id="7">网页正文抽取(Content Extraction)</strong>。</p>
<p data-reader-unique-id="8">基于机器学习的网页抽取算法大致可以分为以下几类：</p>
<ul data-reader-unique-id="9">
<li data-reader-unique-id="10"><strong data-reader-unique-id="11">基于启发式规则和无监督学习的网页抽取算法</strong></li>
<li data-reader-unique-id="12"><strong data-reader-unique-id="13">基于分类器的网页抽取算法</strong></li>
<li data-reader-unique-id="14"><strong data-reader-unique-id="15">基于网页模板自动生成的网页抽取算法</strong></li>
</ul>
<p data-reader-unique-id="16">三类算法中，第一类算法是最好实现的，也是效果最好的。<br data-reader-unique-id="17">
下面简单描述一下三类算法，如果你只是希望在工程中使用这些算法，只要了解第一类算法即可。<br data-reader-unique-id="18">
下面会提到一些论文，但请不要根据论文里自己的实验数据来判断算法的好坏，很多算法面向早期网页设计（即以表格为框架的网页），还有一些算法的实验数据集覆盖面较窄。有条件最好自己对这些算法进行评测。</p>
<h2 data-reader-unique-id="19">1. 基于启发式规则和无监督学习的网页抽取算法</h2>
<p data-reader-unique-id="20">基于启发式规则和无监督学习的网页抽取算法（第一类算法）是目前最简单，也是效果最好的方法。且其具有较高的通用性，即算法往往在不同语种、不同结构的网页上都有效。</p>
<p data-reader-unique-id="21">早期的这类算法大多数没有将网页解析为DOM树，而是将网页解析为一个token序列，例如对于下面这段html源码:</p>
<div data-reader-unique-id="22"><div class="scrollable" style=""><pre data-reader-unique-id="23" style="white-space: pre;"><code data-reader-unique-id="24"><span data-reader-unique-id="25"><span data-reader-unique-id="26"><span data-reader-unique-id="27">&lt;</span>body</span><span data-reader-unique-id="28">&gt;</span></span>
    <span data-reader-unique-id="29"><span data-reader-unique-id="30"><span data-reader-unique-id="31">&lt;</span>div</span><span data-reader-unique-id="32">&gt;</span></span>广告...(8字)<span data-reader-unique-id="33"><span data-reader-unique-id="34"><span data-reader-unique-id="35">&lt;/</span>div</span><span data-reader-unique-id="36">&gt;</span></span>
    <span data-reader-unique-id="37"><span data-reader-unique-id="38"><span data-reader-unique-id="39">&lt;</span>div</span> <span data-reader-unique-id="40">class</span><span data-reader-unique-id="41"><span data-reader-unique-id="42">=</span><span data-reader-unique-id="43">"</span>main<span data-reader-unique-id="44">"</span></span><span data-reader-unique-id="45">&gt;</span></span>正文...(500字)<span data-reader-unique-id="46"><span data-reader-unique-id="47"><span data-reader-unique-id="48">&lt;/</span>div</span><span data-reader-unique-id="49">&gt;</span></span>
    <span data-reader-unique-id="50"><span data-reader-unique-id="51"><span data-reader-unique-id="52">&lt;</span>div</span> <span data-reader-unique-id="53">class</span><span data-reader-unique-id="54"><span data-reader-unique-id="55">=</span><span data-reader-unique-id="56">"</span>foot<span data-reader-unique-id="57">"</span></span><span data-reader-unique-id="58">&gt;</span></span>页脚...(6字)<span data-reader-unique-id="59"><span data-reader-unique-id="60"><span data-reader-unique-id="61">&lt;/</span>div</span><span data-reader-unique-id="62">&gt;</span></span>
<span data-reader-unique-id="63"><span data-reader-unique-id="64"><span data-reader-unique-id="65">&lt;/</span>body</span><span data-reader-unique-id="66">&gt;</span></span>
<span aria-hidden="true" data-reader-unique-id="67"><span data-reader-unique-id="68"></span><span data-reader-unique-id="69"></span><span data-reader-unique-id="70"></span><span data-reader-unique-id="71"></span><span data-reader-unique-id="72"></span></span></code></pre></div></div>
<p data-reader-unique-id="73">程序将其转换为token序列：</p>
<div data-reader-unique-id="74"><div class="scrollable extendsBeyondTextColumn" style="width: 785.203125px; margin-inline-start: -48px;"><pre data-reader-unique-id="75" style="white-space: pre;"><code data-reader-unique-id="76"><span data-reader-unique-id="77">标签</span><span data-reader-unique-id="78">(</span>body<span data-reader-unique-id="79">)</span><span data-reader-unique-id="80">,</span><span data-reader-unique-id="81">标签</span><span data-reader-unique-id="82">(</span>div<span data-reader-unique-id="83">)</span><span data-reader-unique-id="84">,</span>文本<span data-reader-unique-id="85">,</span>文本<span data-reader-unique-id="86">...</span><span data-reader-unique-id="87">.</span><span data-reader-unique-id="88">(</span><span data-reader-unique-id="89">8</span>次<span data-reader-unique-id="90">)</span><span data-reader-unique-id="91">,</span><span data-reader-unique-id="92">标签</span><span data-reader-unique-id="93">(</span><span data-reader-unique-id="94">/</span>div<span data-reader-unique-id="95">)</span><span data-reader-unique-id="96">,</span><span data-reader-unique-id="97">标签</span><span data-reader-unique-id="98">(</span>div<span data-reader-unique-id="99">)</span><span data-reader-unique-id="100">,</span>文本<span data-reader-unique-id="101">,</span>文本<span data-reader-unique-id="102">...</span><span data-reader-unique-id="103">(</span><span data-reader-unique-id="104">500</span>次<span data-reader-unique-id="105">)</span><span data-reader-unique-id="106">,</span><span data-reader-unique-id="107">标签</span><span data-reader-unique-id="108">(</span><span data-reader-unique-id="109">/</span>div<span data-reader-unique-id="110">)</span><span data-reader-unique-id="111">,</span><span data-reader-unique-id="112">标签</span><span data-reader-unique-id="113">(</span>div<span data-reader-unique-id="114">)</span><span data-reader-unique-id="115">,</span>文本<span data-reader-unique-id="116">,</span>文本<span data-reader-unique-id="117">...</span><span data-reader-unique-id="118">(</span><span data-reader-unique-id="119">6</span>次<span data-reader-unique-id="120">)</span><span data-reader-unique-id="121">,</span><span data-reader-unique-id="122">标签</span><span data-reader-unique-id="123">(</span><span data-reader-unique-id="124">/</span>div<span data-reader-unique-id="125">)</span><span data-reader-unique-id="126">,</span><span data-reader-unique-id="127">标签</span><span data-reader-unique-id="128">(</span><span data-reader-unique-id="129">/</span>body<span data-reader-unique-id="130">)</span>
<span aria-hidden="true" data-reader-unique-id="131"><span data-reader-unique-id="132"></span></span></code></pre></div></div>
<p data-reader-unique-id="133">早期有一种MSS算法(Maximum Subsequence Segmentation)以token序列为基础，算法有多个版本，其中一个版本为token序列中的每一个token赋予一个分数，打分规则如下：</p>
<ul data-reader-unique-id="134">
<li data-reader-unique-id="135">一个标签给 -3.25 分</li>
<li data-reader-unique-id="136">一个文本给 +1 分</li>
</ul>
<p data-reader-unique-id="137">根据打分规则和上面的token序列，我们可以获取一个分数序列：</p>
<div data-reader-unique-id="138"><div class="scrollable extendsBeyondTextColumn" style="width: 785.203125px; margin-inline-start: -48px;"><pre data-reader-unique-id="139" style="white-space: pre;"><code data-reader-unique-id="140">-3.25<span data-reader-unique-id="141">,</span>-3.25<span data-reader-unique-id="142">,</span>1<span data-reader-unique-id="143">,</span>1<span data-reader-unique-id="144">,</span>1...<span data-reader-unique-id="145">(</span>8次<span data-reader-unique-id="146">)</span><span data-reader-unique-id="147">,</span>-3.25<span data-reader-unique-id="148">,</span>-3.25<span data-reader-unique-id="149">,</span>1<span data-reader-unique-id="150">,</span>1<span data-reader-unique-id="151">,</span>1...<span data-reader-unique-id="152">(</span>500次<span data-reader-unique-id="153">)</span><span data-reader-unique-id="154">,</span>-3.25<span data-reader-unique-id="155">,</span>-3.25<span data-reader-unique-id="156">,</span>1<span data-reader-unique-id="157">,</span>1<span data-reader-unique-id="158">,</span>1...<span data-reader-unique-id="159">(</span>6次<span data-reader-unique-id="160">)</span><span data-reader-unique-id="161">,</span>-3.25<span data-reader-unique-id="162">,</span>-3.25
<span aria-hidden="true" data-reader-unique-id="163"><span data-reader-unique-id="164"></span></span></code></pre></div></div>
<ul data-reader-unique-id="165">
<li data-reader-unique-id="166">
<strong data-reader-unique-id="167">MSS算法</strong><br data-reader-unique-id="168">
MSS算法认为，找出token序列中的一个子序列，使得这个子序列中token对应的分数总和达到最大，则这个子序列就是网页中的正文。从另一个角度来理解这个规则，即从html源码字符串中找出一个子序列，这个子序列应该尽量包含较多的文本和较少的标签，因为算法中给标签赋予了绝对值较大的负分(-3.25)，为文本赋予了较小的正分(1)。</li>
</ul>
<p data-reader-unique-id="169">如何从分数序列中找出总和最大的子序列可以用动态规划很好地解决，这里就不给出详细算法，有兴趣可以参考《<a href="https://link.jianshu.com?t=http://cogcomp.cs.illinois.edu/papers/PasternackRo09.pdf" target="_blank" rel="nofollow" data-reader-unique-id="170">Extracting Article Text from the Web with Maximum Subsequence Segmentation</a>》这篇论文，MSS算法的效果并不好，但本文认为它可以代表早期的很多算法。</p>
<ul data-reader-unique-id="171">
<li data-reader-unique-id="172"><p data-reader-unique-id="173"><strong data-reader-unique-id="174">MSS算法（朴素贝叶斯）</strong><br data-reader-unique-id="175">
MSS还有其他的版本，我们上面说算法给标签和文本分别赋予-3.25和1分，这是固定值，还有一个版本的MSS（也在论文中）利用朴素贝叶斯的方法为标签和文本计算分数。虽然这个版本的MSS效果有一定的提升，但仍不理想。</p></li>
<li data-reader-unique-id="176"><p data-reader-unique-id="177"><strong data-reader-unique-id="178">利用聚类的方法</strong><br data-reader-unique-id="179">
无监督学习在第一类算法中也起到重要作用。很多算法利用聚类的方法，将网页的正文和非正文自动分为2类。例如在《<a href="https://link.jianshu.com?t=http://www.cse.nd.edu/~tweninge/pubs/WHH_WWW10.pdf" target="_blank" rel="nofollow" data-reader-unique-id="180">CETR - Content Extraction via Tag Ratios</a>》算法中，网页被切分为多行文本，算法为每行文本计算2个特征，分别是下图中的横轴和纵轴，红色椭圆中的单元（行），大多数是网页正文，而绿色椭圆中包含的单元（行），大多数是非正文，使用k-means等聚类方法，就可以很好地将正文和非正文分为两类，然后再设计一些启发式算法，即可区分两类中哪一类是正文，哪一类是非正文。</p></li>
</ul>

<ul data-reader-unique-id="187">
<li data-reader-unique-id="188">
<strong data-reader-unique-id="189">使用DOM树的Node作为特征计算的基本单元</strong><br data-reader-unique-id="190">
早期的算法往往将token序列、字符序列作为计算特征的单元，从某种意义来说，这破坏了网页的结构，也没有充分利用网页的特征。在后来的算法中，很多使用DOM树的Node作为特征计算的基本单元，例如《<a href="https://link.jianshu.com?t=https://www.researchgate.net/publication/266654484_Web_news_extraction_via_path_ratios" target="_blank" rel="nofollow" data-reader-unique-id="191">Web news extraction via path ratios</a>》、《<a href="https://link.jianshu.com?t=http://ofey.me/papers/cetd-sigir11.pdf" target="_blank" rel="nofollow" data-reader-unique-id="192">Dom based content extraction via text density</a>》，这些算法仍然是利用启发式规则和无监督学习，由于使用DOM树的Node作为特征计算的基本单元，使得算法可以获取到更好、更多的特征，因此可以设计更好的启发式规则和无监督学习算法，这些算法在抽取效果上，往往远高于前面所述的算法。由于在抽取时使用DOM树的Node作为单元，算法也可以较容易地保留正文的结构（主要是为了保持网页中正文的排版）。<br data-reader-unique-id="193">
我们在WebCollector(1.12版本开始)中，实现了一种第一类算法，可以到<a href="https://link.jianshu.com?t=https://github.com/CrawlScript/WebCollector" target="_blank" rel="nofollow" data-reader-unique-id="194">官网</a>直接下载源码使用。</li>
</ul>
<h2 data-reader-unique-id="195">2. 基于分类器的网页抽取算法（第二类机器学习抽取算法）</h2>
<p data-reader-unique-id="196">实现基于分类器的网页抽取算法（第二类算法），大致流程如下：</p>
<ul data-reader-unique-id="197">
<li data-reader-unique-id="198">找几千个网页作为训练集，对网页的正文和非正文（即需要抽取和不需要抽取的部分）进行人工标注。</li>
<li data-reader-unique-id="199">设计特征。例如一些算法将DOM树的标签类型(div,p,body等)作为特征之一（当然这是一个不推荐使用的特征)。</li>
<li data-reader-unique-id="200">选择合适的分类器，利用特征进行训练。</li>
</ul>
<p data-reader-unique-id="201"><strong data-reader-unique-id="202">对于网页抽取，特征的设计是第一位的，具体使用什么分类器有时候并不是那么重要。</strong>在使用相同特征的情况下，使用决策树、SVM、神经网络等不同的分类器不一定对抽取效果造成太大的影响。</p>
<p data-reader-unique-id="203">从工程的角度来说，流程中的第一步和第二步都是较为困难的。训练集的选择也很有讲究，要保证在选取的数据集中网页结构的多样性。例如现在比较流行的正文结构为：</p>
<div data-reader-unique-id="204"><div class="scrollable" style=""><pre data-reader-unique-id="205" style="white-space: pre;"><code data-reader-unique-id="206"><span data-reader-unique-id="207"><span data-reader-unique-id="208"><span data-reader-unique-id="209">&lt;</span>div</span><span data-reader-unique-id="210">&gt;</span></span>
    <span data-reader-unique-id="211"><span data-reader-unique-id="212"><span data-reader-unique-id="213">&lt;</span>p</span><span data-reader-unique-id="214">&gt;</span></span>xxxx<span data-reader-unique-id="215"><span data-reader-unique-id="216"><span data-reader-unique-id="217">&lt;/</span>p</span><span data-reader-unique-id="218">&gt;</span></span>
    <span data-reader-unique-id="219"><span data-reader-unique-id="220"><span data-reader-unique-id="221">&lt;</span>p</span><span data-reader-unique-id="222">&gt;</span></span>xxxxxxxx<span data-reader-unique-id="223"><span data-reader-unique-id="224"><span data-reader-unique-id="225">&lt;/</span>p</span><span data-reader-unique-id="226">&gt;</span></span>
    <span data-reader-unique-id="227"><span data-reader-unique-id="228"><span data-reader-unique-id="229">&lt;</span>span</span><span data-reader-unique-id="230">&gt;</span></span>xxx<span data-reader-unique-id="231"><span data-reader-unique-id="232"><span data-reader-unique-id="233">&lt;/</span>span</span><span data-reader-unique-id="234">&gt;</span></span>
    <span data-reader-unique-id="235"><span data-reader-unique-id="236"><span data-reader-unique-id="237">&lt;</span>p</span><span data-reader-unique-id="238">&gt;</span></span>xxxxx<span data-reader-unique-id="239"><span data-reader-unique-id="240"><span data-reader-unique-id="241">&lt;/</span>p</span><span data-reader-unique-id="242">&gt;</span></span>
    <span data-reader-unique-id="243"><span data-reader-unique-id="244"><span data-reader-unique-id="245">&lt;</span>p</span><span data-reader-unique-id="246">&gt;</span></span>xxxx<span data-reader-unique-id="247"><span data-reader-unique-id="248"><span data-reader-unique-id="249">&lt;/</span>p</span><span data-reader-unique-id="250">&gt;</span></span>
<span data-reader-unique-id="251"><span data-reader-unique-id="252"><span data-reader-unique-id="253">&lt;/</span>div</span><span data-reader-unique-id="254">&gt;</span></span>
<span aria-hidden="true" data-reader-unique-id="255"><span data-reader-unique-id="256"></span><span data-reader-unique-id="257"></span><span data-reader-unique-id="258"></span><span data-reader-unique-id="259"></span><span data-reader-unique-id="260"></span><span data-reader-unique-id="261"></span><span data-reader-unique-id="262"></span></span></code></pre></div></div>
<h4 data-reader-unique-id="263">2.1 <a href="https://link.jianshu.com?t=https://en.wikipedia.org/wiki/Eager_learning" target="_blank" rel="nofollow" data-reader-unique-id="264">eager learning</a>
</h4>
<p data-reader-unique-id="265">基于分类器的网页抽取算法，算法通过训练集产生了模型（如决策树模型、神经网络模型等）</p>
<p data-reader-unique-id="266">如果训练集中只有五六个网站的页面，很有可能这些网站的正文都是上面这种结构，而恰好在特征设计中，有两个特征是：</p>
<ul data-reader-unique-id="267">
<li data-reader-unique-id="268">节点标签类型(div,p,body等)</li>
<li data-reader-unique-id="269">孩子节点标签类型频数(即孩子节点中，div有几个，p有几个…)</li>
</ul>
<p data-reader-unique-id="270">假设使用决策树作为分类器，最后的训练出的模型很可能是：</p>
<div data-reader-unique-id="271"><div class="scrollable extendsBeyondTextColumn" style="width: 734px; margin-inline-start: -22.398438px;"><pre data-reader-unique-id="272" style="white-space: pre;"><code data-reader-unique-id="273">如果一个节点的标签类型为div，且其孩子节点中标签为p的节点超过3个，则这个节点对应网页的正文。
<span aria-hidden="true" data-reader-unique-id="274"><span data-reader-unique-id="275"></span></span></code></pre></div></div>
<p data-reader-unique-id="276">虽然这个模型在训练数据集上可以达到较好的抽取效果，但显而易见，有很多网站不满足这个规则。因此训练集的选择，对抽取算法的效果有很大的影响。</p>
<p data-reader-unique-id="277">网页设计的风格一致在变，早期的网页往往利用表格(table)构建整个网页的框架，现在的网页喜欢用div构建网页的框架。如果希望抽取算法能够覆盖较长的时间段，在特征设计时，就要尽量选用那些不易变化的特征。标签类型是一个很容易变化的特征，随着网页设计风格的变化而变化，因此前面提到，非常不建议使用标签类型作为训练特征。</p>
<h4 data-reader-unique-id="278">2.2 <a href="https://link.jianshu.com?t=https://en.wikipedia.org/wiki/Lazy_learning" target="_blank" rel="nofollow" data-reader-unique-id="279">lazy learning</a>
</h4>
<p data-reader-unique-id="280">事先不通过训练集产生模型的算法，比较有名的KNN就是属于lazy learning。</p>
<p data-reader-unique-id="281">一些抽取算法借助KNN来选择抽取算法，可能听起来有些绕，这里解释一下。假设有2种抽取算法A、B，有3个网站site1,site2,site3。2种算法在3个网站上的抽取效果（这里用0%-100%的一个数表示，越大说明越好)如下：</p>
<div class="scrollable" style=""><table data-reader-unique-id="282">
<thead data-reader-unique-id="283">
<tr data-reader-unique-id="284">
<th data-reader-unique-id="285">网站</th>
<th data-reader-unique-id="286">A算法抽取效果</th>
<th data-reader-unique-id="287">B算法抽取效果</th>
</tr>
</thead>
<tbody data-reader-unique-id="288">
<tr data-reader-unique-id="289">
<td data-reader-unique-id="290">site1</td>
<td data-reader-unique-id="291">90%</td>
<td data-reader-unique-id="292">70%</td>
</tr>
<tr data-reader-unique-id="293">
<td data-reader-unique-id="294">site2</td>
<td data-reader-unique-id="295">80%</td>
<td data-reader-unique-id="296">85%</td>
</tr>
<tr data-reader-unique-id="297">
<td data-reader-unique-id="298">site3</td>
<td data-reader-unique-id="299">60%</td>
<td data-reader-unique-id="300">87%</td>
</tr>
</tbody>
</table></div>
<p data-reader-unique-id="301">可以看出来，在site1上，A算法的抽取效果比B好，在site2和site3上，B算法的抽取效果较好。在实际中，这种情况很常见。所以有些人就希望设计一个分类器，这个分类器不是用来分类正文和非正文，而是用来帮助选择抽取算法。例如在这个例子中，分类器在我们对site1中网页进行抽取时，应该告诉我们使用A算法可以获得更好的效果。</p>
<p data-reader-unique-id="302">举个形象的例子，A算法在政府类网站上抽取效果较好，B算法在互联网新闻网站上抽取效果较好。那么当我对政府类网站进行抽取时，分类器应该帮我选择A算法。</p>
<p data-reader-unique-id="303">这个分类器的实现，可以借助KNN算法。事先需要准备一个数据集，数据集中有多个站点的网页，同时需要维护一张表，表中告诉我们在每个站点上，不同抽取算法的抽取效果（实际上只要知道在每个站点上，哪个算法抽取效果最好即可）。当遇到一个待抽取的网页，我们将网页和数据集中所有网页对比（效率很低），找出最相似的K个网页，然后看着K个网页中，哪个站点的网页最多（例如k=7,其中有6个网页都是来自CSDN新闻）,那么我们就选择这个站点上效果最好的算法，对这个未知网页进行抽取。</p>
<h2 data-reader-unique-id="304">3. 基于网页模板自动生成的网页抽取算法</h2>
<p data-reader-unique-id="305">基于网页模板自动生成的网页抽取算法（第三类算法）有很多种。这里例举一种。在《<a href="https://link.jianshu.com?t=http://source.ijs.si/mjursic/firstshowcase/raw/2673d5b2254a7b7899b88ebe640a8ac9b8f06f9b/FirstShowcase/Content/pub/CIKM-2013.pdf" target="_blank" rel="nofollow" data-reader-unique-id="306">URL Tree: Efficient Unsupervised Content Extraction from Streams of Web Documents</a>》中，用多个相同结构页面（通过URL判断）的对比，找出其中异同，页面间的共性的部分是非正文，页面间差别较大的部分有可能是正文。这个很好理解，例如在一些网站中，所有的网页页脚都相同，都是备案信息或者版权申明之类的，这是页面之间的共性，因此算法认为这部分是非正文。而不同网页的正文往往是不同的，因此算法识别出正文页较容易。这种算法往往并不是针对单个网页作正文抽取，而是收集大量同构网页后，对多个网页同时进行抽取。也就是说，并不是输入一个网页就可以实时进行抽取。</p>
</div></div>


<div id="assistant-container" style="display: none; height: 100%; min-width: 300px; overflow: hidden auto; position: fixed; z-index: 1;"><p style="height: 0px; width: 0px; margin: 0px;">​</p><div id="summary-container" style="display: none;"><h3 id="summary-header"></h3><p id="sidebar-summary-text-id-1"></p></div><div id="tableOfContents-container" style="display: none;"><h3 id="tableOfContents-header"></h3><ol id="tableOfContents-list"></ol></div><p style="height: 0px; width: 0px; margin: 0px;">​</p></div></body></html>