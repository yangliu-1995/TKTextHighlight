<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TKTextHighlight ç¤ºä¾‹</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
    }
    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    .control-panel {
      background: #f5f5f5;
      padding: 20px;
      border-radius: 8px;
      position: sticky;
      top: 20px;
      height: fit-content;
    }
    .content-panel {
      background: white;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 8px;
    }
    h1 {
      text-align: center;
      grid-column: 1 / -1;
    }
    .input-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 600;
    }
    input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-sizing: border-box;
    }
    button {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
      border: none;
      border-radius: 4px;
      background: #007bff;
      color: white;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #0056b3;
    }
    button.secondary {
      background: #6c757d;
    }
    button.secondary:hover {
      background: #545b62;
    }
    button.danger {
      background: #dc3545;
    }
    button.danger:hover {
      background: #c82333;
    }
    .example-text {
      margin-top: 20px;
      padding: 15px;
      background: #fff;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
    }
    .example-text p {
      margin: 10px 0;
    }
  </style>
</head>
<body>
  <h1>TKTextHighlight ç¤ºä¾‹ï¼ˆæ€§èƒ½ä¼˜åŒ–ç‰ˆï¼‰</h1>
  
  <div class="container">
    <div class="control-panel">
      <h2>æ§åˆ¶é¢æ¿</h2>
      
      <div class="input-group">
        <label for="searchText">æœç´¢æ–‡æœ¬ï¼š</label>
        <input type="text" id="searchText" placeholder="è¾“å…¥è¦é«˜äº®çš„æ–‡æœ¬" value="JavaScript">
      </div>
      
      <div class="input-group">
        <label for="searchIndex">åŒ¹é…ç´¢å¼•ï¼ˆç¬¬å‡ ä¸ªï¼‰ï¼š</label>
        <input type="number" id="searchIndex" placeholder="ä»0å¼€å§‹" value="0" min="0">
      </div>
      
      <button onclick="doHighlight()">ğŸ” é«˜äº®æ–‡æœ¬</button>
      
      <hr style="margin: 20px 0; border: none; border-top: 1px solid #ddd;">
      
      <div class="input-group">
        <label for="markStart">æ ‡è®°èµ·å§‹ä½ç½®ï¼š</label>
        <input type="number" id="markStart" placeholder="åœ¨é«˜äº®æ–‡æœ¬ä¸­çš„ä½ç½®" value="0" min="0">
      </div>
      
      <div class="input-group">
        <label for="markLength">æ ‡è®°é•¿åº¦ï¼š</label>
        <input type="number" id="markLength" placeholder="æ ‡è®°çš„å­—ç¬¦æ•°" value="4" min="1">
      </div>
      
      <button class="secondary" onclick="doMark()">âœ¨ æ ‡è®°èŒƒå›´</button>
      
      <hr style="margin: 20px 0; border: none; border-top: 1px solid #ddd;">
      
      <button class="danger" onclick="doClear()">ğŸ—‘ï¸ æ¸…é™¤é«˜äº®</button>
      
      <div id="status" style="margin-top: 15px; padding: 10px; background: #e9ecef; border-radius: 4px; font-size: 14px; display: none;"></div>
    </div>
    
    <div class="content-panel">
      <h2>ç¤ºä¾‹å†…å®¹</h2>
      <div class="example-text" id="content">
        <h3>å…³äº JavaScript</h3>
        <p>JavaScript æ˜¯ä¸€ç§é«˜çº§çš„ã€è§£é‡Šå‹çš„ç¼–ç¨‹è¯­è¨€ã€‚JavaScript æ˜¯ä¸€é—¨åŸºäºåŸå‹ã€å‡½æ•°å…ˆè¡Œçš„è¯­è¨€ï¼Œæ˜¯ä¸€é—¨å¤šèŒƒå¼çš„è¯­è¨€ï¼Œå®ƒæ”¯æŒé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼Œå‘½ä»¤å¼ç¼–ç¨‹ï¼Œä»¥åŠå‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
        
        <p>JavaScript æœ€åˆè¢«è®¾è®¡ä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼Œç”¨æ¥ç»™ HTML ç½‘é¡µå¢åŠ åŠ¨æ€åŠŸèƒ½ã€‚ç„¶è€Œéšç€æ—¶é—´çš„æ¨ç§»ï¼ŒJavaScript å·²ç»æˆä¸ºäº†ä¸€é—¨é€šç”¨çš„ç¼–ç¨‹è¯­è¨€ã€‚</p>
        
        <p>ç°åœ¨ï¼ŒJavaScript ä¸ä»…å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨ç«¯æˆ–å…¶ä»–ä»»ä½•æ­è½½äº† JavaScript å¼•æ“çš„è®¾å¤‡ä¸Šè¿è¡Œã€‚æµè§ˆå™¨ä¸­åµŒå…¥äº† JavaScript å¼•æ“ï¼Œæœ‰æ—¶ä¹Ÿç§°ä½œ"JavaScript è™šæ‹Ÿæœº"ã€‚</p>
        
        <h3>JavaScript çš„åº”ç”¨</h3>
        <p>JavaScript å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼šæ“ä½œç½‘é¡µå†…å®¹ã€å“åº”ç”¨æˆ·æ“ä½œã€ä¸æœåŠ¡å™¨é€šä¿¡ç­‰ç­‰ã€‚ä½¿ç”¨ JavaScriptï¼Œä½ å¯ä»¥åˆ›å»ºäº¤äº’å¼çš„ç½‘é¡µåº”ç”¨ã€‚</p>
        
        <p>é™¤äº†æµè§ˆå™¨ç«¯ï¼ŒJavaScript é€šè¿‡ Node.js ä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼Œè¿™ä½¿å¾— JavaScript æˆä¸ºäº†å…¨æ ˆå¼€å‘çš„é¦–é€‰è¯­è¨€ä¹‹ä¸€ã€‚</p>
      </div>
    </div>
  </div>

  <script src="dist/tk-text-highlight.js"></script>
  <script>
    // åˆ›å»º highlighter å®ä¾‹ï¼ŒæŒ‡å®šè¦æœç´¢çš„æ ¹å…ƒç´ 
    const highlighter = new TKTextHighlight(document.getElementById('content'));
    
    function showStatus(message, isError = false) {
      const statusEl = document.getElementById('status');
      statusEl.textContent = message;
      statusEl.style.display = 'block';
      statusEl.style.background = isError ? '#f8d7da' : '#d4edda';
      statusEl.style.color = isError ? '#721c24' : '#155724';
      
      setTimeout(() => {
        statusEl.style.display = 'none';
      }, 3000);
    }
    
    function doHighlight() {
      const text = document.getElementById('searchText').value;
      const index = parseInt(document.getElementById('searchIndex').value) || 0;
      
      if (!text) {
        showStatus('è¯·è¾“å…¥è¦æœç´¢çš„æ–‡æœ¬', true);
        return;
      }
      
      // æ€§èƒ½æµ‹è¯•ï¼šæµ‹é‡æ‰§è¡Œæ—¶é—´
      const startTime = performance.now();
      const success = highlighter.highlight(text, index);
      const endTime = performance.now();
      const duration = (endTime - startTime).toFixed(2);
      
      if (success) {
        // è·å–æ€»åŒ¹é…æ•°
        const totalMatches = highlighter.countMatches(text);
        showStatus(`âœ… æˆåŠŸé«˜äº®ç¬¬ ${index} ä¸ªåŒ¹é…é¡¹ï¼ˆå…±æ‰¾åˆ° ${totalMatches} ä¸ªï¼‰- è€—æ—¶: ${duration}ms`);
      } else {
        showStatus(`æœªæ‰¾åˆ°ç¬¬ ${index} ä¸ªåŒ¹é…é¡¹ - è€—æ—¶: ${duration}ms`, true);
      }
    }
    
    function doMark() {
      const start = parseInt(document.getElementById('markStart').value) || 0;
      const length = parseInt(document.getElementById('markLength').value) || 0;
      
      if (length <= 0) {
        showStatus('æ ‡è®°é•¿åº¦å¿…é¡»å¤§äº0', true);
        return;
      }
      
      const startTime = performance.now();
      const success = highlighter.mark({ start, length });
      const endTime = performance.now();
      const duration = (endTime - startTime).toFixed(2);
      
      if (success) {
        showStatus(`âœ… æˆåŠŸæ ‡è®°èŒƒå›´ [${start}, ${start + length}) - è€—æ—¶: ${duration}ms`);
      } else {
        showStatus('æ ‡è®°å¤±è´¥ï¼Œè¯·å…ˆé«˜äº®æ–‡æœ¬', true);
      }
    }
    
    function doClear() {
      highlighter.clearHighlight();
      showStatus('å·²æ¸…é™¤æ‰€æœ‰é«˜äº®');
    }
    
    // æ”¯æŒå›è½¦é”®è§¦å‘æœç´¢
    document.getElementById('searchText').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        doHighlight();
      }
    });
    
    document.getElementById('searchIndex').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        doHighlight();
      }
    });
  </script>
</body>
</html>

